<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Achei Instrutor</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
</head>
<body>
  <!-- Cabeçalho -->
  <header class="topo">
    <div class="logo">
      <img src="logo.png" alt="Instrutor Pro" />
      <span>Achei Instrutor</span>
    </div>
    <button class="menu-toggle">☰</button>
    <nav class="menu">
      <a href="index.html">Início</a>
      <a href="sobre.html">Sobre nós</a>
      <a href="contato.html">Fale Conosco</a>
      <button class="btn amarelo" id="btnInstrutor">Sou Instrutor</button>
    </nav> 
  </header>

  <!-- Seção principal -->
<!-- Sessão de busca -->
<section class="fundo-busca" data-aos="fade-up">
  <div class="form-bloco">
    <!-- coluna esquerda: imagem -->
    <div class="imagem"></div>

    <!-- coluna direita: formulário + resultados -->
    <div class="formulario">
      <h2 id="titulo-form">Buscar Instrutor Credenciado</h2>
      <div id="form-area"></div>

      <!-- ✅ resultados abaixo do formulário -->
      <div class="resultado-bloco">
        <h4 id="filtro-info"></h4>
        <p id="filtro-aplicado"></p>
        <div id="resultado" class="carousel-container"></div>
      </div>
    </div>
  </div>
</section>

<h2 style="text-align:center; margin-bottom:10px; font-size:22px; font-weight:600; color:#333;">
  Saiba o que muda na formação de novos motoristas
</h2>

<div class="video-container">
  <iframe 
    src="https://www.youtube.com/embed/MQsEbHDy9O8"
    title="Contran aprova fim de aulas obrigatórias em autoescolas"
    frameborder="0"
    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
    referrerpolicy="strict-origin-when-cross-origin"
    allowfullscreen>
  </iframe>
</div>

<style>
  .video-container {
    width: 100%;        
    margin: 30px auto;   /* menos espaço em cima/baixo */
    max-width: 900px;    /* limite no desktop para não ocupar toda a tela */
  }

  .video-container iframe {
    width: 100%;
    height: 360px;       /* altura ajustada no desktop */
    border-radius: 8px;
    border: none;
    display: block;
  }

  @media (max-width: 768px) {
    .video-container iframe {
      height: 240px;     /* altura menor só no mobile */
    }
  }
</style>


<!-- Sessão: Como funciona -->
<section class="como-funciona" data-aos="fade-right">
  <h2>Como Funciona</h2>
  <p>
    O Achei Instrutor conecta pessoas que desejam aprender a dirigir com instrutores credenciados
    em sua região. Basta selecionar estado, cidade, categoria da CNH e preferência de gênero
    para encontrar rapidamente profissionais disponíveis. Nosso objetivo é simplificar o processo
    e dar autonomia ao aluno para escolher quem vai acompanhá-lo nas aulas práticas.
  </p>
</section>

<!-- Sessão: Nossa Missão -->
<section class="missao" data-aos="zoom-in">
  <h2>Nossa Missão</h2>
  <p>
    Servimos como ponte entre candidatos à CNH e instrutores credenciados, sejam homens ou mulheres.
    Acreditamos que todos merecem acesso a profissionais qualificados, com transparência e segurança.
    Nossa missão é democratizar o acesso ao ensino de direção, oferecendo praticidade e confiança
    na escolha do instrutor.
  </p>
</section>

<!-- Sessão: Requisitos para ser Instrutor -->
<section class="requisitos" data-aos="fade-left">
  <h2>Requisitos para ser Instrutor Credenciado</h2>
  <p>
    Para atuar como instrutor de trânsito autônomo no Brasil, é necessário cumprir alguns requisitos
    estabelecidos pelo Contran e pelo Detran:
  </p>
  <ul>
    <li>Ter no mínimo <strong>21 anos de idade</strong>.</li>
    <li>Possuir <strong>CNH válida</strong> na categoria que deseja ensinar, há pelo menos 2 anos.</li>
    <li>Não ter cometido infrações graves ou gravíssimas nos últimos 12 meses.</li>
    <li>Concluir um <strong>curso específico de formação de instrutor</strong>, com conteúdo pedagógico,
        técnico e prático sobre legislação de trânsito e condução responsável.</li>
    <li>Ser cadastrado e autorizado pelo <strong>Detran</strong> do estado de atuação.</li>
  </ul>
  <p>
    Esses critérios garantem que apenas profissionais qualificados possam oferecer aulas práticas,
    assegurando a segurança e a qualidade do processo de formação de novos condutores.
  </p>
</section>

<!-- Sessão: Transparência e Valores -->
<section class="transparencia" data-aos="flip-up">
  <h2>Transparência e Valores</h2>
  <p>
    No Achei Instrutor, prezamos pela transparência em todas as etapas. O instrutor tem total liberdade
    para definir o valor que deseja cobrar por aula. A plataforma não interfere na negociação entre
    cliente e instrutor no quesito de valores.
  </p>
  <p>
    Para se manter visível na plataforma, é cobrada apenas uma taxa simbólica de <strong>R$ 19,90 por mês</strong>.
    Todo o dinheiro arrecadado pelo instrutor durante o mês é <strong>100% dele</strong>, sem qualquer retenção
    ou comissão por parte da plataforma.
  </p>
  <p>
    Após o cadastro e envio dos documentos, nossa equipe leva em torno de <strong>24 horas</strong> para analisar
    e verificar se está tudo de acordo. Logo após a aprovação, a empresa entrará em contato solicitando
    o pagamento da taxa mensal de R$ 19,90. Com o pagamento confirmado, o instrutor passa a aparecer
    nos filtros da cidade em que foi cadastrado, tornando-se visível para os alunos que buscam
    profissionais credenciados.
  </p>
</section>

<!-- Sessão: Conexões e Informações -->
<!-- Sessão: Redes sociais e políticas -->
<!-- Sessão Institucional / Contato -->
<section id="contato" class="institucional-section scroll-reveal">
  <div class="institucional-grid">
    
    <!-- Coluna 1: Logo e informações -->
    <div class="institucional-col">
      <img src="logo.png" alt="Logo Instrutor Pro" class="institucional-logo" />
      <p>Achei Instrutor é a plataforma que conecta alunos a instrutores credenciados de forma prática, segura e transparente.</p>
    </div>

    <!-- Coluna 2: Menu rápido -->
    <div class="institucional-col">
      <h4>Menu rápido</h4>
      <ul>
        <li><a href="#inicio">Início</a></li>
        <li><a href="#cadastro">Cadastro</a></li>
        <li><a href="#servicos">Serviços</a></li>
        <li><a href="#faq">FAQ</a></li>
        <li><a href="#contato">Contato</a></li>
      </ul>
    </div>

    <!-- Coluna 3: Institucional -->
    <div class="institucional-col">
      <h4>Institucional</h4>
      <ul>
        <li><a href="/politicas-de-privacidade" target="_blank">Política de Privacidade</a></li>
        <li><a href="/termos-de-uso" target="_blank">Termos de Uso</a></li>
      </ul>
    </div>
  </div>

  <!-- Ícones sociais -->
<div class="redes-sociais">
  <a href="https://wa.me/5585991340658" target="_blank" aria-label="WhatsApp">
    <i class="fa-brands fa-whatsapp"></i>
  </a>
  <a href="https://instagram.com/instrutorpro" target="_blank" aria-label="Instagram">
    <i class="fa-brands fa-instagram"></i>
  </a>
  <a href="https://twitter.com/instrutorpro" target="_blank" aria-label="X">
    <i class="fa-brands fa-x-twitter"></i>
  </a>
  <a href="https://facebook.com/instrutorpro" target="_blank" aria-label="Facebook">
    <i class="fa-brands fa-facebook"></i>
  </a>
</div>
</section>

<!-- Footer principal -->
<footer>
  © 2025 Achei Instrutor - Todos os direitos reservados
</footer>

  <!-- Script -->
  <script>
    // Formulário de aluno
    function carregarFormularioAluno() {
      document.getElementById("titulo-form").innerText = "Buscar Instrutor(a) Credênciado(a)";
      document.getElementById("form-area").innerHTML = `
        <form onsubmit="buscarInstrutor(event)">
          <div class="linha-horizontal">
            <div class="campo">
              <label for="estado">Estado:</label>
              <select id="estado" required>
                <option value="">Selecione o estado</option>
              </select>
            </div>
            <div class="campo">
              <label for="cidade">Cidade:</label>
              <select id="cidade" required>
                <option value="">Selecione a cidade</option>
              </select>
            </div>
          </div>
          <div class="linha-horizontal">
            <div class="campo">
              <label for="categoria">Categoria CNH:</label>
              <select id="categoria" required>
                <option value="">Selecione a categoria</option>
                <option value="A">A</option>
                <option value="B">B</option>
                <option value="C">C</option>
                <option value="D">D</option>
                <option value="E">E</option>
              </select>
            </div>
            <div class="campo">
              <label for="sexo">Sexo:</label>
<select id="sexo" name="sexo" required>
  <option value="">Selecione</option>
  <option value="feminino">Feminino</option>
  <option value="masculino">Masculino</option>
  <option value="sem-preferencia">Sem preferência</option>
</select>
            </div>
          </div>
          <button type="submit">Buscar</button>
        </form>
        <div id="resultado"></div>
      `;

      carregarEstadosAluno();
      document.getElementById("estado").addEventListener("change", carregarCidadesAluno);
    }

async function buscarInstrutor(event) {
  event.preventDefault();
  const estado = document.getElementById("estado").selectedOptions[0].text;
  const cidade = document.getElementById("cidade").value;
  const categoria = document.getElementById("categoria").value;
  const sexo = document.getElementById("sexo").value;

  try {
    const resposta = await fetch(
      `https://meuinstrutor.onrender.com/instrutores/aceitos?cidade=${cidade}&estado=${estado}&sexo=${sexo}&categorias=${categoria}`
    );
    const instrutores = await resposta.json();

    let html = `<h4>Instrutores disponíveis em ${cidade}/${estado}:</h4>`;
    html += `<p>Filtro aplicado: Categoria ${categoria}, Sexo ${sexo}</p>`;
    html += `<div class="carousel-container">`; // ✅ usa carrossel

    instrutores.forEach(instrutor => {
      const nomes = instrutor.nome.split(" ");
      const primeiroNome = nomes[0] || "";
      const segundoNome = nomes[1] || "";

      const telefone = instrutor.telefone.replace(/\D/g, "");
      const linkWhats = `https://wa.me/55${telefone}`;

      html += `
        <div class="card-instrutor">
          <img src="${instrutor.selfie}" alt="Foto de ${instrutor.nome}" class="foto-instrutor">
          <h3>${primeiroNome} ${segundoNome}</h3>
          <p class="categorias">Categoria(s): ${instrutor.categorias}</p>
          <a href="${linkWhats}" target="_blank" class="btn-whatsapp">WhatsApp</a>
        </div>
      `;
    });

    html += `</div>`;
    document.getElementById("resultado").innerHTML = html;
  } catch (error) {
    console.error("Erro ao buscar instrutores:", error);
    document.getElementById("resultado").innerHTML = "<p>Erro ao buscar instrutores.</p>";
  }
}
    // Formulário de instrutor
   function carregarFormularioInstrutor() {
  document.getElementById("titulo-form").innerText = "Cadastro de Instrutor";
  document.getElementById("form-area").innerHTML = `
    <form id="formInstrutor" onsubmit="cadastrarInstrutor(event)">
      
      <!-- Etapa 1: Dados pessoais -->
      <div class="etapa" id="etapa1">
        <label>Nome completo:</label>
        <input type="text" id="nome" required>

        <label>CPF:</label>
        <input type="text" id="cpf" maxlength="14" required>

        <!-- Campo Sexo -->
        <label>Sexo:</label>
        <select id="sexoInstrutor" required>
          <option value="">Selecione</option>
          <option value="M">Masculino</option>
          <option value="F">Feminino</option>
        </select>

        <!-- Campo Telefone -->
        <label>Telefone:</label>
        <input 
          type="tel" 
          id="telefone" 
          name="telefone" 
          placeholder="(XX)9XXXX-XXXX" 
          title="Formato esperado: (XX)9XXXX-XXXX">

        <button type="button" onclick="proximaEtapa(2)">Próximo</button>
      </div>

      <!-- Etapa 2: Endereço -->
      <div class="etapa" id="etapa2" style="display:none;">
        <h4>Endereço</h4>
        <label>CEP:</label>
        <input type="text" id="cep" required>
        
        <label>Rua:</label>
        <input type="text" id="rua" required>
        
        <label>Número:</label>
        <input type="text" id="numero" required>
        
        <label>Bairro:</label>
        <input type="text" id="bairro" required>

        <label>Estado:</label>
        <select id="estadoInstrutor" required>
          <option value="">Selecione o estado</option>
        </select>

        <label>Cidade:</label>
        <select id="cidadeInstrutor" required>
          <option value="">Selecione a cidade</option>
        </select>

        <button type="button" onclick="voltarEtapa(1)">Voltar</button>
        <button type="button" onclick="proximaEtapa(3)">Próximo</button>
      </div>

      <!-- Etapa 3: Documentos -->
      <div class="etapa" id="etapa3" style="display:none;">
        <h4>Anexos Obrigatórios</h4>

        <!-- Campo de selfie -->
        <label>Foto de Perfil:</label>
        <input type="file" id="selfie" name="selfie" accept="image/*" capture="user" required>

        <label>Comprovante de Residência:</label>
        <input type="file" id="comprovante" name="comprovante" required>

        <label>CNH Válida:</label>
        <input type="file" id="cnh" name="cnh" required>

        <label>Certificado de Instrutor de Trânsito:</label>
        <input type="file" id="certificado" name="certificado" required>

        <h4>Especializações de ensino:</h4>
        <div class="categorias">
          <label><input type="checkbox" name="categoria" value="A"> A</label>
          <label><input type="checkbox" name="categoria" value="B"> B</label>
          <label><input type="checkbox" name="categoria" value="C"> C</label>
          <label><input type="checkbox" name="categoria" value="D"> D</label>
          <label><input type="checkbox" name="categoria" value="E"> E</label>
        </div>

        <button type="button" onclick="voltarEtapa(2)">Voltar</button>
        <button type="submit">Enviar</button>
      </div>
    </form>
  `;

      // Inicializar selects IBGE para instrutor
      carregarEstadosInstrutor();
      document.getElementById("estadoInstrutor").addEventListener("change", carregarCidadesInstrutor);

      aplicarMascaraCPF();
      aplicarMascaraTelefone();

      document.getElementById("formInstrutor").addEventListener("submit", async function(event) {
        event.preventDefault();

        const categoriasSelecionadas = [];
        document.querySelectorAll('input[name="categoria"]:checked').forEach(el => {
          categoriasSelecionadas.push(el.value);
        });

        const formData = new FormData();
        formData.append("nome", document.getElementById("nome").value);
        formData.append("cpf", document.getElementById("cpf").value);
        formData.append("sexo", document.getElementById("sexoInstrutor").value);
        formData.append("endereco", document.getElementById("rua").value + ", " + document.getElementById("numero").value);
        formData.append("cidade", document.getElementById("cidadeInstrutor").value);
        formData.append("estado", document.getElementById("estadoInstrutor").selectedOptions[0].text);
        formData.append("telefone", document.getElementById("telefone").value);
        formData.append("selfie", document.getElementById("selfie").files[0]);
        formData.append("comprovante", document.getElementById("comprovante").files[0]);
        formData.append("cnh", document.getElementById("cnh").files[0]);
        formData.append("certificado", document.getElementById("certificado").files[0]);
        formData.append("categorias", categoriasSelecionadas.join(","));

        try {
          console.log("Disparando fetch...");
          const resposta = await fetch("https://meuinstrutor.onrender.com/instrutores", {
            method: "POST",
            body: formData
          });

          if (!resposta.ok) {
            throw new Error("Erro no servidor: " + resposta.status);
          }

          const resultado = await resposta.json();
          alert(resultado.message);
          document.getElementById("formInstrutor").reset();
          proximaEtapa(1); // volta para a primeira etapa
        } catch (error) {
          console.error("Erro ao cadastrar instrutor:", error);
          alert("Erro ao cadastrar instrutor. Verifique se o servidor está rodando e a tabela existe.");
        }
      });
    }

    // Navegação entre etapas
    function proximaEtapa(n) {
      document.querySelectorAll('.etapa').forEach(e => e.style.display = 'none');
      const etapa = document.getElementById('etapa' + n);
      etapa.style.display = 'block';
      etapa.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    function voltarEtapa(n) {
      document.querySelectorAll('.etapa').forEach(e => e.style.display = 'none');
      const etapa = document.getElementById('etapa' + n);
      etapa.style.display = 'block';
      etapa.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    // Carregar estados/cidades para aluno
    async function carregarEstadosAluno() {
      try {
        const resp = await fetch("https://servicodados.ibge.gov.br/api/v1/localidades/estados");
        const estados = await resp.json();
        const selectEstado = document.getElementById("estado");

        selectEstado.innerHTML = "<option value=''>Selecione o estado</option>";

        estados.sort((a, b) => a.nome.localeCompare(b.nome));

        estados.forEach(estado => {
          const option = document.createElement("option");
          option.value = estado.id;
          option.textContent = estado.nome;
          selectEstado.appendChild(option);
        });
      } catch (error) {
        console.error("Erro ao carregar estados:", error);
      }
    }

    async function carregarCidadesAluno() {
      const estadoId = document.getElementById("estado").value;
      if (!estadoId) return;

      try {
        const resp = await fetch(`https://servicodados.ibge.gov.br/api/v1/localidades/estados/${estadoId}/municipios`);
        const cidades = await resp.json();
        const selectCidade = document.getElementById("cidade");

        selectCidade.innerHTML = "<option value=''>Selecione a cidade</option>";

        cidades.sort((a, b) => a.nome.localeCompare(b.nome));

        cidades.forEach(cidade => {
          const option = document.createElement("option");
          option.value = cidade.nome;
          option.textContent = cidade.nome;
          selectCidade.appendChild(option);
        });
      } catch (error) {
        console.error("Erro ao carregar cidades:", error);
      }
    }

    // Carregar estados/cidades para instrutor
    async function carregarEstadosInstrutor() {
      try {
        const resp = await fetch("https://servicodados.ibge.gov.br/api/v1/localidades/estados");
        const estados = await resp.json();
        const selectEstado = document.getElementById("estadoInstrutor");

        selectEstado.innerHTML = "<option value=''>Selecione o estado</option>";

        estados.sort((a, b) => a.nome.localeCompare(b.nome));

        estados.forEach(estado => {
          const option = document.createElement("option");
          option.value = estado.id;
          option.textContent = estado.nome;
          selectEstado.appendChild(option);
        });
      } catch (error) {
        console.error("Erro ao carregar estados (instrutor):", error);
      }
    }

    async function carregarCidadesInstrutor() {
      const estadoId = document.getElementById("estadoInstrutor").value;
      if (!estadoId) return;

      try {
        const resp = await fetch(`https://servicodados.ibge.gov.br/api/v1/localidades/estados/${estadoId}/municipios`);
        const cidades = await resp.json();
        const selectCidade = document.getElementById("cidadeInstrutor");

        selectCidade.innerHTML = "<option value=''>Selecione a cidade</option>";

        cidades.sort((a, b) => a.nome.localeCompare(b.nome));

        cidades.forEach(cidade => {
          const option = document.createElement("option");
          option.value = cidade.nome;
          option.textContent = cidade.nome;
          selectCidade.appendChild(option);
        });
      } catch (error) {
        console.error("Erro ao carregar cidades (instrutor):", error);
      }
    }

    // Máscara de CPF
    function aplicarMascaraCPF() {
      const cpfInput = document.getElementById("cpf");
      if (!cpfInput) return;

      cpfInput.addEventListener("input", () => {
        let value = cpfInput.value.replace(/\D/g, "");
        if (value.length > 11) value = value.slice(0, 11);

        if (value.length > 9) {
          value = value.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, "$1.$2.$3-$4");
        } else if (value.length > 6) {
          value = value.replace(/(\d{3})(\d{3})(\d{1,3})/, "$1.$2.$3");
        } else if (value.length > 3) {
          value = value.replace(/(\d{3})(\d{1,3})/, "$1.$2");
        }

        cpfInput.value = value;
      });
    }

    // Inicialização
    document.addEventListener("DOMContentLoaded", () => {
      carregarFormularioAluno();
      document.getElementById("btnInstrutor").addEventListener("click", carregarFormularioInstrutor);

      const toggle = document.querySelector(".menu-toggle");
      const menu = document.querySelector("nav.menu");

      toggle.addEventListener("click", (e) => {
        e.stopPropagation();
        menu.classList.toggle("active");
      });

      document.addEventListener("click", (e) => {
        if (menu.classList.contains("active") && !menu.contains(e.target) && !toggle.contains(e.target)) {
          menu.classList.remove("active");
        }
      });
    });

function aplicarMascaraTelefone() {
  const telInput = document.getElementById("telefone");
  if (!telInput) return;

  telInput.addEventListener("input", () => {
    let value = telInput.value.replace(/\D/g, ""); // só números
    if (value.length > 11) value = value.slice(0, 11);

    if (value.length > 6) {
      value = value.replace(/(\d{2})(\d{1})(\d{4})(\d{0,4})/, "($1)$2$3-$4");
    } else if (value.length > 2) {
      value = value.replace(/(\d{2})(\d{1})(\d{0,4})/, "($1)$2$3");
    } else {
      value = value.replace(/(\d{0,2})/, "($1");
    }

    telInput.value = value;
  });
}

document.addEventListener("DOMContentLoaded", () => {
  AOS.init({
    duration: 1000, // duração da animação
    once: true      // anima só uma vez
  });
});

  </script>
</body>
</html>