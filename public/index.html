<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Achei Instrutor</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
</head>
<body>
  <!-- Cabe√ßalho -->
  <header class="topo">
    <div class="logo">
      <img src="logo.png" alt="Instrutor Pro" />
      <span>Achei Instrutor</span>
    </div>
    <button class="menu-toggle">‚ò∞</button>
    <nav class="menu">
      <a href="index.html">In√≠cio</a>
      <a href="sobre.html">Sobre n√≥s</a>
      <a href="contato.html">Fale Conosco</a>
      <button class="btn amarelo" id="btnInstrutor">Sou Instrutor</button>
    </nav> 
  </header>

  <!-- Se√ß√£o principal -->
<!-- Sess√£o de busca -->
<!-- Section do formul√°rio -->
<section class="fundo-busca" data-aos="fade-up">
  <div class="form-bloco">
    <div class="imagem"></div>
    <div class="formulario">
      <h2 id="titulo-form">Buscar Instrutor Credenciado</h2>
      <div id="form-area"></div>
    </div>
  </div>
</section>

<!-- Section dos resultados (separada, logo abaixo) -->
<section class="fundo-resultados" data-aos="fade-up">
  <div class="resultado-bloco">
    <h4 id="filtro-info"></h4>
    <p id="filtro-aplicado"></p>
    <div id="resultado" class="carousel-container"></div>
  </div>
</section>


<h2 style="text-align:center; margin-bottom:10px; font-size:22px; font-weight:600; color:#333;">
  Saiba o que muda na forma√ß√£o de novos motoristas
</h2>

<div class="video-container">
  <iframe 
    src="https://www.youtube.com/embed/MQsEbHDy9O8"
    title="Contran aprova fim de aulas obrigat√≥rias em autoescolas"
    frameborder="0"
    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
    referrerpolicy="strict-origin-when-cross-origin"
    allowfullscreen>
  </iframe>
</div>

<style>
  .video-container {
    width: 100%;        
    margin: 30px auto;   /* menos espa√ßo em cima/baixo */
    max-width: 900px;    /* limite no desktop para n√£o ocupar toda a tela */
  }

  .video-container iframe {
    width: 100%;
    height: 360px;       /* altura ajustada no desktop */
    border-radius: 8px;
    border: none;
    display: block;
  }

  @media (max-width: 768px) {
    .video-container iframe {
      height: 240px;     /* altura menor s√≥ no mobile */
    }
  }
</style>


<!-- Sess√£o: Como funciona -->
<section class="como-funciona" data-aos="fade-right">
  <h2>Como Funciona</h2>
  <p>
    O Achei Instrutor conecta pessoas que desejam aprender a dirigir com instrutores credenciados
    em sua regi√£o. Basta selecionar estado, cidade, categoria da CNH e prefer√™ncia de g√™nero
    para encontrar rapidamente profissionais dispon√≠veis. Nosso objetivo √© simplificar o processo
    e dar autonomia ao aluno para escolher quem vai acompanh√°-lo nas aulas pr√°ticas.
  </p>
</section>

<!-- Sess√£o: Nossa Miss√£o -->
<section class="missao" data-aos="zoom-in">
  <h2>Nossa Miss√£o</h2>
  <p>
    Servimos como ponte entre candidatos √† CNH e instrutores credenciados, sejam homens ou mulheres.
    Acreditamos que todos merecem acesso a profissionais qualificados, com transpar√™ncia e seguran√ßa.
    Nossa miss√£o √© democratizar o acesso ao ensino de dire√ß√£o, oferecendo praticidade e confian√ßa
    na escolha do instrutor.
  </p>
</section>

<!-- Sess√£o: Requisitos para ser Instrutor -->
<section class="requisitos" data-aos="fade-left">
  <h2>Requisitos para ser Instrutor Credenciado</h2>
  <p>
    Para atuar como instrutor de tr√¢nsito aut√¥nomo no Brasil, √© necess√°rio cumprir alguns requisitos
    estabelecidos pelo Contran e pelo Detran:
  </p>
  <ul>
    <li>Ter no m√≠nimo <strong>21 anos de idade</strong>.</li>
    <li>Possuir <strong>CNH v√°lida</strong> na categoria que deseja ensinar, h√° pelo menos 2 anos.</li>
    <li>N√£o ter cometido infra√ß√µes graves ou grav√≠ssimas nos √∫ltimos 12 meses.</li>
    <li>Concluir um <strong>curso espec√≠fico de forma√ß√£o de instrutor</strong>, com conte√∫do pedag√≥gico,
        t√©cnico e pr√°tico sobre legisla√ß√£o de tr√¢nsito e condu√ß√£o respons√°vel.</li>
    <li>Ser cadastrado e autorizado pelo <strong>Detran</strong> do estado de atua√ß√£o.</li>
  </ul>
  <p>
    Esses crit√©rios garantem que apenas profissionais qualificados possam oferecer aulas pr√°ticas,
    assegurando a seguran√ßa e a qualidade do processo de forma√ß√£o de novos condutores.
  </p>
</section>

<!-- Sess√£o: Transpar√™ncia e Valores -->
<section class="transparencia" data-aos="flip-up">
  <h2>Transpar√™ncia e Valores</h2>
  <p>
    No Achei Instrutor, prezamos pela transpar√™ncia em todas as etapas. O instrutor tem total liberdade
    para definir o valor que deseja cobrar por aula. A plataforma n√£o interfere na negocia√ß√£o entre
    cliente e instrutor no quesito de valores.
  </p>
  <p>
    Para se manter vis√≠vel na plataforma, √© cobrada apenas uma taxa simb√≥lica de <strong>R$ 19,90 por m√™s</strong>.
    Todo o dinheiro arrecadado pelo instrutor durante o m√™s √© <strong>100% dele</strong>, sem qualquer reten√ß√£o
    ou comiss√£o por parte da plataforma.
  </p>
  <p>
    Ap√≥s o cadastro e envio dos documentos, nossa equipe leva em torno de <strong>24 horas</strong> para analisar
    e verificar se est√° tudo de acordo. Logo ap√≥s a aprova√ß√£o, a empresa entrar√° em contato solicitando
    o pagamento da taxa mensal de R$ 19,90. Com o pagamento confirmado, o instrutor passa a aparecer
    nos filtros da cidade em que foi cadastrado, tornando-se vis√≠vel para os alunos que buscam
    profissionais credenciados.
  </p>
</section>

<!-- Sess√£o: Conex√µes e Informa√ß√µes -->
<!-- Sess√£o: Redes sociais e pol√≠ticas -->
<!-- Sess√£o Institucional / Contato -->
<section id="contato" class="institucional-section scroll-reveal">
  <div class="institucional-grid">
    
    <!-- Coluna 1: Logo e informa√ß√µes -->
    <div class="institucional-col">
      <img src="logo.png" alt="Logo Instrutor Pro" class="institucional-logo" />
      <p>Achei Instrutor √© a plataforma que conecta alunos a instrutores credenciados de forma pr√°tica, segura e transparente.</p>
    </div>

    <!-- Coluna 2: Menu r√°pido -->
    <div class="institucional-col">
      <h4>Menu r√°pido</h4>
      <ul>
        <li><a href="#inicio">In√≠cio</a></li>
        <li><a href="#cadastro">Cadastro</a></li>
        <li><a href="#servicos">Servi√ßos</a></li>
        <li><a href="#faq">FAQ</a></li>
        <li><a href="#contato">Contato</a></li>
      </ul>
    </div>

    <!-- Coluna 3: Institucional -->
    <div class="institucional-col">
      <h4>Institucional</h4>
      <ul>
        <li><a href="/politicas-de-privacidade" target="_blank">Pol√≠tica de Privacidade</a></li>
        <li><a href="/termos-de-uso" target="_blank">Termos de Uso</a></li>
      </ul>
    </div>
  </div>

  <!-- √çcones sociais -->
<div class="redes-sociais">
  <a href="https://wa.me/5585991340658" target="_blank" aria-label="WhatsApp">
    <i class="fa-brands fa-whatsapp"></i>
  </a>
  <a href="https://instagram.com/instrutorpro" target="_blank" aria-label="Instagram">
    <i class="fa-brands fa-instagram"></i>
  </a>
  <a href="https://twitter.com/instrutorpro" target="_blank" aria-label="X">
    <i class="fa-brands fa-x-twitter"></i>
  </a>
  <a href="https://facebook.com/instrutorpro" target="_blank" aria-label="Facebook">
    <i class="fa-brands fa-facebook"></i>
  </a>
</div>
</section>

<!-- Footer principal -->
<footer>
  ¬© 2025 Achei Instrutor - Todos os direitos reservados
</footer>

  <!-- Script -->
  <script>
    // Formul√°rio de aluno
    function carregarFormularioAluno() {
      document.getElementById("titulo-form").innerText = "Buscar Instrutor(a) Cred√™nciado(a)";
      document.getElementById("form-area").innerHTML = `
        <form onsubmit="buscarInstrutor(event)">
          <div class="linha-horizontal">
            <div class="campo">
              <label for="estado">Estado:</label>
              <select id="estado" required>
                <option value="">Selecione o estado</option>
              </select>
            </div>
            <div class="campo">
              <label for="cidade">Cidade:</label>
              <select id="cidade" required>
                <option value="">Selecione a cidade</option>
              </select>
            </div>
          </div>
          <div class="linha-horizontal">
            <div class="campo">
              <label for="categoria">Categoria CNH:</label>
              <select id="categoria" required>
                <option value="">Selecione a categoria</option>
                <option value="A">A</option>
                <option value="B">B</option>
                <option value="C">C</option>
                <option value="D">D</option>
                <option value="E">E</option>
              </select>
            </div>
            <div class="campo">
              <label for="sexo">Sexo:</label>
<select id="sexo" name="sexo" required>
  <option value="">Selecione</option>
  <option value="feminino">Feminino</option>
  <option value="masculino">Masculino</option>
  <option value="sem-preferencia">Sem prefer√™ncia</option>
</select>
            </div>
          </div>
          <button type="submit">Buscar</button>

<p style="font-size: 12px; color: #555; margin-top: 8px;">
  Ao clicar em <strong>Buscar</strong>, voc√™ concorda com os 
  <a href="/termos" target="_blank" style="color: orange;">Termos de Uso</a> e com a 
  <a href="/privacidade" target="_blank" style="color: orange;">Pol√≠tica de Privacidade</a>.
</p>
        </form>
        <div id="resultado"></div>
      `;

      carregarEstadosAluno();
      document.getElementById("estado").addEventListener("change", carregarCidadesAluno);
    }

async function buscarInstrutor(event) {
  event.preventDefault();
  const estado = document.getElementById("estado").selectedOptions[0].text;
  const cidade = document.getElementById("cidade").value;
  const categoria = document.getElementById("categoria").value;
  const sexo = document.getElementById("sexo").value;

  try {
    const resposta = await fetch(
      `https://meuinstrutor.onrender.com/instrutores/aceitos?cidade=${cidade}&estado=${estado}&sexo=${sexo}&categorias=${categoria}`
    );
    const instrutores = await resposta.json();

    let html = `<h4>Instrutores dispon√≠veis em ${cidade}/${estado}:</h4>`;
    html += `<p>Filtro aplicado: Categoria ${categoria}, Sexo ${sexo}</p>`;
    html += `<div class="carousel-container">`;

instrutores.forEach(instrutor => {
  const nomes = instrutor.nome.split(" ");
  const primeiroNome = nomes[0] || "";
  const segundoNome = nomes[1] || "";
  const telefone = instrutor.telefone ? instrutor.telefone.replace(/\D/g, "") : "";
  const linkWhats = telefone ? `https://wa.me/55${telefone}` : "#";

  // üîë Tratamento: se vier null, usa placeholder
  const selfieUrl = instrutor.selfie || "https://res.cloudinary.com/dzwkr47ib/image/upload/v1234567890/placeholder.jpg";

  html += `
    <div class="card-instrutor">
      <img src="${selfieUrl}" alt="Foto de ${instrutor.nome}" class="foto-instrutor">
      <h3>${primeiroNome} ${segundoNome}</h3>
      <p class="categorias">Categoria(s): ${instrutor.categorias || "N√£o informado"}</p>
      <a href="${linkWhats}" target="_blank" class="btn-whatsapp">WhatsApp</a>
    </div>
  `;
});

    html += `</div>`;
    document.getElementById("resultado").innerHTML = html; // üîë injeta na section nova
  } catch (error) {
    console.error("Erro ao buscar instrutores:", error);
    document.getElementById("resultado").innerHTML = "<p>Erro ao buscar instrutores.</p>";
  }
}
    // Formul√°rio de instrutor
function carregarFormularioInstrutor() {
  document.getElementById("titulo-form").innerText = "Cadastro de Instrutor";
  document.getElementById("form-area").innerHTML = `
    <form id="formInstrutor">
      
      <!-- Etapa 1: Dados pessoais -->
      <div class="etapa" id="etapa1">
        <label>Nome completo:</label>
        <input type="text" id="nome" name="nome" required>

        <label>Email:</label>
        <input type="email" id="email" name="email" required>

        <label>CPF:</label>
        <input type="text" id="cpf" name="cpf" maxlength="14" required>

        <label>Sexo:</label>
        <select id="sexoInstrutor" name="sexo" required>
          <option value="">Selecione</option>
          <option value="M">Masculino</option>
          <option value="F">Feminino</option>
        </select>

        <label>Telefone (Whatsapp):</label>
        <input type="tel" id="telefone" name="telefone" placeholder="(XX)9XXXX-XXXX">

        <button type="button" onclick="validarEAvancar(1,2)">Pr√≥ximo</button>
      </div>

      <!-- Etapa 2: Endere√ßo -->
      <div class="etapa" id="etapa2" style="display:none;">
        <h4>Localiza√ß√£o</h4>
        
        <label>Estado:</label>
        <select id="estadoInstrutor" name="estado" required>
          <option value="">Selecione o estado</option>
        </select>

        <label>Cidade:</label>
        <select id="cidadeInstrutor" name="cidade" required>
          <option value="">Selecione a cidade</option>
        </select>

        <button type="button" onclick="voltarEtapa(1)">Voltar</button>
        <button type="button" onclick="validarEAvancar(2,3)">Pr√≥ximo</button>
      </div>

      <!-- Etapa 3: Identifica√ß√£o Pessoal -->
      <div class="etapa" id="etapa3" style="display:none;">
        <h4>Identifica√ß√£o Pessoal</h4>

        <label for="selfie" class="custom-file-label">
          <i class="fa-solid fa-upload"></i> Carregar Foto do instrutor(a)
        </label>
        <input type="file" id="selfie" name="selfie" accept="image/*" required>
        <span class="upload-check" id="check-selfie"></span>

        <label for="comprovante" class="custom-file-label">
          <i class="fa-solid fa-upload"></i> Enviar Comprovante de Resid√™ncia
        </label>
        <input type="file" id="comprovante" name="comprovante" required>
        <span class="upload-check" id="check-comprovante"></span>

        <button type="button" onclick="voltarEtapa(2)">Voltar</button>
        <button type="button" onclick="validarEAvancar(3,4)">Pr√≥ximo</button>
      </div>

      <!-- Etapa 4: CNH, Certificado e Categorias -->
      <div class="etapa" id="etapa4" style="display:none;">
        <h4>Habilita√ß√£o e Certifica√ß√£o</h4>

        <label for="cnh" class="custom-file-label">
          <i class="fa-solid fa-upload"></i> Carteira Nacional de Habilita√ß√£o
        </label>
        <input type="file" id="cnh" name="cnh" required>
        <span class="upload-check" id="check-cnh"></span>

        <label for="certificado" class="custom-file-label">
          <i class="fa-solid fa-upload"></i> Certificado de Instrutor de Tr√¢nsito
        </label>
        <input type="file" id="certificado" name="certificado" required>
        <span class="upload-check" id="check-certificado"></span>

        <h4>Especializa√ß√µes de ensino:</h4>
        <div class="categorias">
          <label><input type="checkbox" name="categorias" value="A"> A</label>
          <label><input type="checkbox" name="categorias" value="B"> B</label>
          <label><input type="checkbox" name="categorias" value="C"> C</label>
          <label><input type="checkbox" name="categorias" value="D"> D</label>
          <label><input type="checkbox" name="categorias" value="E"> E</label>
        </div>

        <button type="button" onclick="voltarEtapa(3)">Voltar</button>
        <button type="submit">Enviar</button>

        <p style="font-size: 12px; color: #555; margin-top: 8px;">
          Ao clicar em <strong>Enviar</strong>, voc√™ concorda com os 
          <a href="/termos" target="_blank" style="color: orange;">Termos de Uso</a> e com a 
          <a href="/privacidade" target="_blank" style="color: orange;">Pol√≠tica de Privacidade</a>.
        </p>
      </div>
    </form>

    <!-- Modal de sucesso -->
    <div id="successModal" class="modal">
      <div class="modal-content">
        <div class="icon-check">
          <i class="fa-solid fa-circle-check"></i>
        </div>
        <h2>Cadastro realizado</h2>
        <p>Seu cadastro foi feito e est√° em an√°lise.<br>
        Dentro de um per√≠odo de 24 horas nossa equipe entrar√° em contato com voc√™ para dar prosseguimento.</p>
        <div class="progress-bar">
          <div class="progress"></div>
        </div>
      </div>
    </div>
  `;

  // ‚úî verde ap√≥s upload
  document.querySelectorAll('#formInstrutor input[type="file"]').forEach(input => {
    input.addEventListener('change', function() {
      const checkSpan = document.getElementById('check-' + this.id);
      if (this.files.length > 0) {
        checkSpan.textContent = "‚úî";
        checkSpan.style.display = "inline";
        checkSpan.style.color = "#2ecc71";
      } else {
        checkSpan.textContent = "";
        checkSpan.style.display = "none";
      }
    });
  });

  // Evento de envio do formul√°rio
  const form = document.getElementById("formInstrutor");
  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    const formData = new FormData(form);

    try {
      const response = await fetch("/instrutores", {
        method: "POST",
        body: formData
      });

      if (response.ok) {
        mostrarModalSucesso();
      } else {
        alert("Erro ao enviar cadastro. Tente novamente.");
      }
    } catch (error) {
      alert("Falha na conex√£o com o servidor.");
    }
  });
}

// ====== FUN√á√ïES DE ETAPAS ======

// Valida√ß√£o de etapa (inclui arquivos)
function validarEtapa(etapaAtual) {
  const etapa = document.getElementById("etapa" + etapaAtual);
  const inputs = etapa.querySelectorAll("input, select");
  let valido = true;

  inputs.forEach(input => {
    if (input.hasAttribute("required")) {
      if (input.type === "file") {
        if (input.files.length === 0) {
          valido = false;
          input.style.border = "2px solid red";
        } else {
          input.style.border = "";
        }
      } else {
        if (!input.value) {
          valido = false;
          input.style.border = "2px solid red";
        } else {
          input.style.border = "";
        }
      }
    }
  });

  return valido;
}

// Avan√ßar etapa com valida√ß√£o
function validarEAvancar(etapaAtual, etapaDestino) {
  if (!validarEtapa(etapaAtual)) {
    alert("Por favor, preencha todos os campos obrigat√≥rios antes de continuar.");
    return;
  }
  document.getElementById("etapa" + etapaAtual).style.display = "none";
  document.getElementById("etapa" + etapaDestino).style.display = "block";
}

// Voltar etapa
function voltarEtapa(etapaDestino) {
  document.querySelectorAll(".etapa").forEach(div => div.style.display = "none");
  document.getElementById("etapa" + etapaDestino).style.display = "block";
}

// ====== FUN√á√ÉO DO MODAL ======
function mostrarModalSucesso() {
  const modal = document.getElementById("successModal");
  const progress = modal.querySelector(".progress");
  modal.style.display = "flex";

  // anima barra decrescente
  progress.style.width = "100%";
  setTimeout(() => { progress.style.width = "0%"; }, 50);

  // fecha modal em 5s
  setTimeout(() => {
    modal.style.display = "none";
    progress.style.width = "100%"; // resetar barra
  }, 5000);

}
  
      // Inicializar selects IBGE para instrutor
      carregarEstadosInstrutor();
      document.getElementById("estadoInstrutor").addEventListener("change", carregarCidadesInstrutor);

      aplicarMascaraCPF();
      aplicarMascaraTelefone();

document.getElementById("formInstrutor").addEventListener("submit", async function(event) {
  event.preventDefault();

  const categoriasSelecionadas = [];
  document.querySelectorAll('input[name="categoria"]:checked').forEach(el => {
    categoriasSelecionadas.push(el.value);
  });

  const formData = new FormData();
  formData.append("nome", document.getElementById("nome").value);
  formData.append("email", document.getElementById("email").value);
  formData.append("cpf", document.getElementById("cpf").value);
  formData.append("sexo", document.getElementById("sexoInstrutor").value);
  formData.append("cidade", document.getElementById("cidadeInstrutor").value);

  // üîë Aqui est√° a corre√ß√£o
  const estadoSelect = document.getElementById("estadoInstrutor");
  const estadoNome = estadoSelect.options[estadoSelect.selectedIndex].text;
  formData.append("estado", estadoNome);

  formData.append("telefone", document.getElementById("telefone").value);
  formData.append("selfie", document.getElementById("selfie").files[0]);
  formData.append("comprovante", document.getElementById("comprovante").files[0]);
  formData.append("cnh", document.getElementById("cnh").files[0]);
  formData.append("certificado", document.getElementById("certificado").files[0]);
  formData.append("categorias", categoriasSelecionadas.join(","));

  try {
    const resposta = await fetch("https://meuinstrutor.onrender.com/instrutores", {
      method: "POST",
      body: formData
    });

    const resultado = await resposta.json();

    if (!resposta.ok) {
      throw new Error(resultado.error || "Erro no servidor");
    }

    alert(resultado.message);
    document.getElementById("formInstrutor").reset();
    proximaEtapa(1);
  } catch (error) {
    console.error("‚ùå Erro ao cadastrar instrutor:", error);
    alert("Erro ao cadastrar instrutor: " + error.message);
  }
});

    // Navega√ß√£o entre etapas
    function proximaEtapa(n) {
      document.querySelectorAll('.etapa').forEach(e => e.style.display = 'none');
      const etapa = document.getElementById('etapa' + n);
      etapa.style.display = 'block';
      etapa.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    function voltarEtapa(n) {
      document.querySelectorAll('.etapa').forEach(e => e.style.display = 'none');
      const etapa = document.getElementById('etapa' + n);
      etapa.style.display = 'block';
      etapa.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    // Carregar estados/cidades para aluno
    async function carregarEstadosAluno() {
      try {
        const resp = await fetch("https://servicodados.ibge.gov.br/api/v1/localidades/estados");
        const estados = await resp.json();
        const selectEstado = document.getElementById("estado");

        selectEstado.innerHTML = "<option value=''>Selecione o estado</option>";

        estados.sort((a, b) => a.nome.localeCompare(b.nome));

        estados.forEach(estado => {
          const option = document.createElement("option");
          option.value = estado.id;
          option.textContent = estado.nome;
          selectEstado.appendChild(option);
        });
      } catch (error) {
        console.error("Erro ao carregar estados:", error);
      }
    }

    async function carregarCidadesAluno() {
      const estadoId = document.getElementById("estado").value;
      if (!estadoId) return;

      try {
        const resp = await fetch(`https://servicodados.ibge.gov.br/api/v1/localidades/estados/${estadoId}/municipios`);
        const cidades = await resp.json();
        const selectCidade = document.getElementById("cidade");

        selectCidade.innerHTML = "<option value=''>Selecione a cidade</option>";

        cidades.sort((a, b) => a.nome.localeCompare(b.nome));

        cidades.forEach(cidade => {
          const option = document.createElement("option");
          option.value = cidade.nome;
          option.textContent = cidade.nome;
          selectCidade.appendChild(option);
        });
      } catch (error) {
        console.error("Erro ao carregar cidades:", error);
      }
    }

    // Carregar estados/cidades para instrutor
    async function carregarEstadosInstrutor() {
      try {
        const resp = await fetch("https://servicodados.ibge.gov.br/api/v1/localidades/estados");
        const estados = await resp.json();
        const selectEstado = document.getElementById("estadoInstrutor");

        selectEstado.innerHTML = "<option value=''>Selecione o estado</option>";

        estados.sort((a, b) => a.nome.localeCompare(b.nome));

        estados.forEach(estado => {
          const option = document.createElement("option");
          option.value = estado.id;
          option.textContent = estado.nome;
          selectEstado.appendChild(option);
        });
      } catch (error) {
        console.error("Erro ao carregar estados (instrutor):", error);
      }
    }

    async function carregarCidadesInstrutor() {
      const estadoId = document.getElementById("estadoInstrutor").value;
      if (!estadoId) return;

      try {
        const resp = await fetch(`https://servicodados.ibge.gov.br/api/v1/localidades/estados/${estadoId}/municipios`);
        const cidades = await resp.json();
        const selectCidade = document.getElementById("cidadeInstrutor");

        selectCidade.innerHTML = "<option value=''>Selecione a cidade</option>";

        cidades.sort((a, b) => a.nome.localeCompare(b.nome));

        cidades.forEach(cidade => {
          const option = document.createElement("option");
          option.value = cidade.nome;
          option.textContent = cidade.nome;
          selectCidade.appendChild(option);
        });
      } catch (error) {
        console.error("Erro ao carregar cidades (instrutor):", error);
      }
    }

    // M√°scara de CPF
    function aplicarMascaraCPF() {
      const cpfInput = document.getElementById("cpf");
      if (!cpfInput) return;

      cpfInput.addEventListener("input", () => {
        let value = cpfInput.value.replace(/\D/g, "");
        if (value.length > 11) value = value.slice(0, 11);

        if (value.length > 9) {
          value = value.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, "$1.$2.$3-$4");
        } else if (value.length > 6) {
          value = value.replace(/(\d{3})(\d{3})(\d{1,3})/, "$1.$2.$3");
        } else if (value.length > 3) {
          value = value.replace(/(\d{3})(\d{1,3})/, "$1.$2");
        }

        cpfInput.value = value;
      });
    }
    // Inicializa√ß√£o
    document.addEventListener("DOMContentLoaded", () => {
      carregarFormularioAluno();
      document.getElementById("btnInstrutor").addEventListener("click", carregarFormularioInstrutor);

      const toggle = document.querySelector(".menu-toggle");
      const menu = document.querySelector("nav.menu");

      toggle.addEventListener("click", (e) => {
        e.stopPropagation();
        menu.classList.toggle("active");
      });

      document.addEventListener("click", (e) => {
        if (menu.classList.contains("active") && !menu.contains(e.target) && !toggle.contains(e.target)) {
          menu.classList.remove("active");
        }
      });
    });

function aplicarMascaraTelefone() {
  const telInput = document.getElementById("telefone");
  if (!telInput) return;

  telInput.addEventListener("input", () => {
    let value = telInput.value.replace(/\D/g, ""); // s√≥ n√∫meros
    if (value.length > 11) value = value.slice(0, 11);

    if (value.length > 6) {
      value = value.replace(/(\d{2})(\d{1})(\d{4})(\d{0,4})/, "($1)$2$3-$4");
    } else if (value.length > 2) {
      value = value.replace(/(\d{2})(\d{1})(\d{0,4})/, "($1)$2$3");
    } else {
      value = value.replace(/(\d{0,2})/, "($1");
    }

    telInput.value = value;
  });
}

document.addEventListener("DOMContentLoaded", () => {
  AOS.init({
    duration: 1000, 
    once: true      // anima s√≥ uma vez
  });
});

// adiciona evento para todos os inputs file
document.querySelectorAll('input[type="file"]').forEach(input => {
  input.addEventListener('change', function() {
    const label = document.querySelector(`label[for="${this.id}"]`);
    if (this.files.length > 0) {
      label.classList.add("uploaded"); // ativa seta verde
    } else {
      label.classList.remove("uploaded"); // remove seta se limpar
    }
  });
});

  </script>
</body>
</html>